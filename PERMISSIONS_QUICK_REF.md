# üîê ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡πá‡∏ß (Quick Reference)

## üéØ ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ï‡∏≤‡∏° Role

```
BRANCH (‡∏™‡∏≤‡∏Ç‡∏≤) = RoleId: 3
‚îú‚îÄ ‚úÖ ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Read Only)
‚îú‚îÄ ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏ö‡∏¥‡∏Å
‚îî‚îÄ ‚ùå ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ / ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç / ‡∏•‡∏ö

CENTER (‡∏Ñ‡∏•‡∏±‡∏á) = RoleId: 2
‚îú‚îÄ ‚úÖ ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
‚îú‚îÄ ‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏ö‡∏¥‡∏Å
‚îú‚îÄ ‚úÖ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏±‡∏á / ‡∏ú‡∏π‡πâ‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢
‚îî‚îÄ ‚ùå ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

ADMIN = RoleId: 1
‚îî‚îÄ ‚úÖ ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á
```

---

## üîß Backend: ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Middleware

### ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà login ‡πÅ‡∏•‡πâ‡∏ß
```typescript
router.get('/api/products', authenticate, getProducts);
```

### CENTER + ADMIN ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
```typescript
router.patch('/api/requisitions/:id/approve', 
  authenticate, 
  authorize([ROLES.CENTER, ROLES.ADMIN]), 
  approveRequisition
);
```

### ADMIN ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
```typescript
router.delete('/api/users/:id', 
  authenticate, 
  authorize([ROLES.ADMIN]), 
  deleteUser
);
```

---

## üé® Frontend: ‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á UI

### ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö BRANCH
```tsx
const { canApproveRequisition } = usePermissions();

{canApproveRequisition && (
  <Button>‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</Button>
)}
```

### ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
```tsx
const { isBranch } = usePermissions();

{isBranch && (
  <Alert>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡πÑ‡∏î‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</Alert>
)}
```

### ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π
```tsx
const { canManageUsers } = usePermissions();

{canManageUsers && (
  <NavLink to="/admin/users">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</NavLink>
)}
```

---

## üìã Checklist

### Backend
- [ ] `import { authenticate, authorize, ROLES } from '../middlewares/authorize'`
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° `authenticate` ‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å protected route
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° `authorize([ROLES...])` ‡πÉ‡∏ô route ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
- [ ] ‡πÉ‡∏ä‡πâ `req.user` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏° role

### Frontend  
- [ ] `import { usePermissions } from "@/hooks/use-permissions"`
- [ ] ‡πÉ‡∏ä‡πâ `canXXX` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°
- [ ] ‡πÉ‡∏ä‡πâ `isBranch` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
- [ ] ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà BRANCH ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô

---

## üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö

1. ‡∏™‡∏£‡πâ‡∏≤‡∏á user ‡∏ó‡∏±‡πâ‡∏á 3 role ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Register
2. Login ‡∏î‡πâ‡∏ß‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞ role ‡πÅ‡∏•‡πâ‡∏ß‡∏î‡∏π‡∏ß‡πà‡∏≤:
   - BRANCH: ‚ùå ‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥, ‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£
   - CENTER: ‚úÖ ‡πÄ‡∏´‡πá‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥, ‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏Ñ‡∏•‡∏±‡∏á/‡∏ú‡∏π‡πâ‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢
   - ADMIN: ‚úÖ ‡πÄ‡∏´‡πá‡∏ô‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á

---

## üí° ‡∏™‡∏£‡∏∏‡∏õ 1 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î

- **Backend**: `authenticate` + `authorize([ROLES...])`
- **Frontend**: `usePermissions()` ‚Üí `{canXXX && <Button />}`

